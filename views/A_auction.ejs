<!-- 
    システム名：HAL自動車オークションシステム
    画面ID：A_auction.ejs
    画面名：オークション管理画面
    作成者：小嶋美紀
 -->
 <!DOCTYPE html>
 <html lang="ja">
 <head>
     <meta charset="UTF-8">
     <meta http-equiv="X-UA-Compatible" content="IE=edge">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <link rel="stylesheet" href="../css/destyle.css">
     <link rel="stylesheet" href="../css/A_style.css">
     <link rel="stylesheet" href="../css/A_auction.css">
 <title>オークション管理画面</title>
 </head>
 <body>
     
     <div class="grid">
         <header><!-- 共通部分 -->
             <h1>オークション管理</h1>
             <!-- <jsp:include page="logout.jsp" /> -->
         </header>
         
         <nav><!-- 共通部分 -->
             <ul>
                 <li><a href="./A_stock.ejs">在庫管理</a></li>
                 <li><a href="./A_auction.ejs" class="current">オークション管理</a></li>
                 <li><a href="./">ユーザー管理</a></li>
                 <li><a href="./">売上管理</a></li>
             </ul>
         </nav>
         
         <main><!-- 画面ごとに変更される部分 -->
			<article>
				<div class="article-header">
					<h2>オークション開催予定</h2>
				</div>
				<h3>12月3日</h3>
				<div class="tablediv">
					<table>
						<tr>
							<th>詳細</th>
							<th>ID</th>
							<th>開催日</th>
							<th>開始時刻</th>
							<th>終了時刻</th>
							<th>変更</th>
							<th>取消</th>
						</tr>
						<tr>
							<td><a href="./A_car_detail.ejs?id=00001" class="detailBtn">詳細</a></td>
							<td>00001</td>
							<td>12月3日</td>
							<td>13:00</td>
							<td>14:00</td>
							<td>変更</td>
							<td>取消</td>
						</tr>
					</table>
				</div>
				<h3>12月4日</h3>

			</article>
			<article>
				<div class="article-header">
					<h2>車両一覧</h2>
					<!-- <div>
						<button id="entry-btn">登録</button>
						<button>PDF出力</button>	
					</div> -->
				</div>
				<div class="tablediv">
					<table>
						<tr>
							<th>出品</th>
							<!-- <th>編集</th> -->
							<th>ID</th>
							<th>メーカー名</th>
							<th>車種名</th>
							<th>グレード名</th>
							<th>排気量</th>
							<th>年式</th>
							<th>輸入車モデル年式</th>
							<th>走行距離</th>
							<th>走行距離の状態</th>
							<th>色系統</th>
							<th>色</th>
							<th>車検有効期限</th>
							<th>ミッション</th>
							<th>ボディタイプ</th>
							<th>型式</th>
						</tr>
						<tr class="stock-row">
							<!-- <td><button class="tdBtn">詳細</button></td> -->
							<!-- <td><a href="./A_car_detail.ejs?id=00001" class="detailBtn">出品</a></td> -->
							<td><button class="exhibition-btn tdBtn" value="00001">出品</button></td>
							<td>00001</td>
							<td>日産</td>
							<td>ジューク</td>
							<td>16GTターボ</td>
							<td>1,610cc</td>
							<td>平成22年(2010年)12月</td>
							<td>-</td>
							<td>59,350km</td>
							<td>実走行</td>
							<td>アカ系</td>
							<td>-</td>
							<td>令和5年12月まで</td>
							<td>オートマチック(AT)</td>
							<td>クロカン、SUV</td>
							<td>型式</td>
						</tr>
						<tr class="stock-row">
							<!-- <td><button class="tdBtn">詳細</button></td> -->
							<!-- <td><a href="./A_car_detail.ejs?id=00001" class="detailBtn">出品</a></td> -->
							<td><button class="exhibition-btn tdBtn" value="00002">出品</button></td>
							<td>00001</td>
							<td>日産</td>
							<td>ジューク</td>
							<td>16GTターボ</td>
							<td>1,610cc</td>
							<td>平成22年(2010年)12月</td>
							<td>-</td>
							<td>59,350km</td>
							<td>実走行</td>
							<td>アカ系</td>
							<td>-</td>
							<td>令和5年12月まで</td>
							<td>オートマチック(AT)</td>
							<td>クロカン、SUV</td>
							<td>型式</td>
						</tr>
					</table>
				</div>
				</div>
			</article>
         </main>
     </div>
 




     <div id="entryModal" class="modal">
        <div class="modal-content">
          <div class="modal-body">
            <div class="modal-header">
                <h3>出品</h2>
                <span class="modalClose">×</span>
            </div>
			<form action="">
				<p>ID<span id="car-id"></span>を出品しますか？</p>
				<button id="ex-btn">出品</button>
			</form>
          </div>
        </div>
    </div>

    <!-- <script src="../js/modal.js"></script> -->
	<script>
		const buttonClose = document.getElementsByClassName('modalClose');
		const carId = document.getElementById('car-id');
		const exBtn = document.getElementById('ex-btn');
		const modal = document.getElementById('entryModal');
		// body要素を取得
		const body = document.getElementsByTagName('body')[0];
		// 出品ボタン
		const exhibitionBtn = document.getElementsByClassName('exhibition-btn');
		//出品ボタンにモーダル表示リスナーを付与
		for(let i=0; i< exhibitionBtn.length;i++){
			exhibitionBtn[i].addEventListener('click',(e)=>{
				console.log("クリック");
				modal.style.display = 'block';
				body.classList.add('open');  
				console.log(exhibitionBtn[i].value);
				carId.innerHTML = exhibitionBtn[i].value;
				exBtn.value = exhibitionBtn[i].value;
			},false);
		}

		// バツ印がクリックされた時
		for(let i=0; i< buttonClose.length;i++){
			console.log(buttonClose[i]);
			buttonClose[i].addEventListener('click',(e)=>{
				modal.style.display = 'none';
				body.classList.remove('open');
			},false);
		}

		// モーダルコンテンツ以外がクリックされた時
		addEventListener('click', outsideClose);
		function outsideClose(e) {
			console.log("outsideClose関数実行");
			console.log(e.target);
			if (e.target == modal) {
				modal.style.display = 'none';
			}
			body.classList.remove('open');
		}

	</script>

 
 </body>
 </html>